import"../chunks/DsnmJJEf.js";import{i as Fe}from"../chunks/gzsJLoAv.js";import{k as Je,m as G,l as Re,n as Ue,o as m,t as H,a as c,q as Ye,r as n,$ as Le,u as o,v as r,w as p,x as a,y as se,z as s,f as C,A as T,B as e,C as ye,c as _e}from"../chunks/EyY2Qe4w.js";import{h as We,s as P,e as $e}from"../chunks/BpIlfRRV.js";import{i as M}from"../chunks/4eF5hKyW.js";import{a as Ge,e as He,b as Ke,i as Qe}from"../chunks/wEJ3cds_.js";import{I as K,p as he,S as xe,a as Ve,b as Xe}from"../chunks/Dpa4i0wj.js";import{p as Ze}from"../chunks/DCLTBedR.js";import{i as ne}from"../chunks/ut9W1y5t.js";import{g as be,f as E}from"../chunks/DXgxfkXT.js";import{C as Q}from"../chunks/BZuN3xt8.js";import{B as z}from"../chunks/DM_qtgBz.js";import{B as et}from"../chunks/VaSqBtMh.js";import{P as tt}from"../chunks/OGZIn3SQ.js";import{T as at}from"../chunks/7FXa3mcv.js";var rt=m('<p class="text-danger-600"> </p>'),st=m('<form class="space-y-4"><!> <!></form>'),nt=m("<!> Add Expense",1),ot=m('<form class="space-y-4"><!> <!> <!> <!></form>'),lt=m('<div class="space-y-4"><div class="flex justify-between"><span class="text-gray-600">Monthly Income:</span> <span class="font-semibold"> </span></div> <div class="flex justify-between"><span class="text-gray-600">Planned Expenses:</span> <span class="font-semibold"> </span></div> <hr/> <div class="flex justify-between text-lg font-bold"><span>Remaining:</span> <span> </span></div></div>'),it=m('<div class="flex-1 grid grid-cols-1 md:grid-cols-3 gap-4"><!> <!> <!></div> <div class="ml-4 flex space-x-2"><!> <!></div>',1),dt=m('<div class="flex-1"><div class="flex items-center space-x-3"><div class="w-3 h-3 rounded-full"></div> <div><p class="font-medium text-gray-900"> </p> <p class="text-sm text-gray-500"> </p></div></div></div> <div class="flex items-center space-x-4"><span class="font-semibold text-gray-900"> </span> <div class="flex space-x-2"><!> <!></div></div>',1),ut=m('<div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg"><!></div>'),ct=m('<div class="space-y-3"></div>'),vt=m('<p class="text-gray-500 text-center py-8">No planned expenses yet. Add some above to get started.</p>'),pt=m('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!>',1),mt=m('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!>',1),gt=m('<div class="space-y-6"><div><h1 class="text-2xl font-bold text-gray-900"> </h1> <p class="text-gray-500 mt-1">Set up your monthly income and planned expenses</p></div> <!></div>');function Tt(Pe,pe){Je(pe,!1);const oe=G();let t=Ze(pe,"data",8),D=G({salary:t().budget?.salary||""}),v=G({categoryId:"",amount:"",description:""}),i=G(null),f=G(!1);async function Se(){if(e(D).salary){p(f,!0);try{(await fetch("/api/budget",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({month:t().currentMonth,year:t().currentYear,salary:parseFloat(e(D).salary.toString())})})).ok&&await ne()}finally{p(f,!1)}}}async function we(){if(!(!e(v).categoryId||!e(v).amount||!t().budget)){p(f,!0);try{(await fetch("/api/planned-expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({budgetId:t().budget.id,categoryId:parseInt(e(v).categoryId),amount:parseFloat(e(v).amount),description:e(v).description})})).ok&&(p(v,{categoryId:"",amount:"",description:""}),await ne())}finally{p(f,!1)}}}async function Ee(){if(e(i)){p(f,!0);try{(await fetch("/api/planned-expenses",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(i))})).ok&&(p(i,null),await ne())}finally{p(f,!1)}}}async function ke(l){if(confirm("Are you sure you want to delete this planned expense?")){p(f,!0);try{(await fetch("/api/planned-expenses",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l})})).ok&&await ne()}finally{p(f,!1)}}}function Ie(l){p(i,{...l})}function Be(){p(i,null)}Re(()=>n(t()),()=>{p(oe,t().categories?.map(l=>({value:l.id.toString(),label:l.name}))||[])}),Ue(),Fe();var le=gt();We(l=>{Le.title="Budget Planning - Budget Tracker"});var ie=r(le),me=r(ie),Ce=r(me);a(me),se(2),a(ie);var Te=s(ie,2);{var Oe=l=>{Q(l,{title:"Error",children:(F,V)=>{var O=rt(),de=r(O,!0);a(O),H(()=>P(de,(n(t()),o(()=>t().error)))),c(F,O)},$$slots:{default:!0}})},je=l=>{var F=mt(),V=C(F),O=r(V);Q(O,{title:"Monthly Income",children:(h,ue)=>{var S=st(),J=r(S);K(J,{label:"Monthly Salary",type:"number",step:"0.01",min:"0",placeholder:"Enter your monthly income",required:!0,get value(){return e(D).salary},set value(R){T(D,e(D).salary=R)},$$legacy:!0});var ce=s(J,2);z(ce,{type:"submit",get loading(){return e(f)},children:(R,j)=>{se();var U=ye();H(()=>P(U,`${n(t()),o(()=>t().budget?"Update":"Create")??""} Budget`)),c(R,U)},$$slots:{default:!0}}),a(S),$e("submit",S,he(Se)),c(h,S)},$$slots:{default:!0}});var de=s(O,2);{var qe=h=>{et(h,{get remaining(){return n(t()),o(()=>t().budgetSummary.plannedRemaining)},get total(){return n(t()),o(()=>t().budgetSummary.salary)},title:"Planned Budget Status"})};M(de,h=>{n(t()),o(()=>t().budgetSummary)&&h(qe)})}a(V);var Ae=s(V,2);{var Ne=h=>{var ue=pt(),S=C(ue),J=r(S);Q(J,{title:"Add Planned Expense",children:(j,U)=>{var _=ot(),q=r(_);xe(q,{label:"Category",get options(){return e(oe)},required:!0,placeholder:"Select a category",get value(){return e(v).categoryId},set value(d){T(v,e(v).categoryId=d)},$$legacy:!0});var A=s(q,2);K(A,{label:"Amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",required:!0,get value(){return e(v).amount},set value(d){T(v,e(v).amount=d)},$$legacy:!0});var w=s(A,2);K(w,{label:"Description (Optional)",placeholder:"What is this expense for?",get value(){return e(v).description},set value(d){T(v,e(v).description=d)},$$legacy:!0});var g=s(w,2);z(g,{type:"submit",get loading(){return e(f)},children:(d,Y)=>{var u=nt(),x=C(u);tt(x,{class:"w-4 h-4 mr-2"}),se(),c(d,u)},$$slots:{default:!0}}),a(_),$e("submit",_,he(we)),c(j,_)},$$slots:{default:!0}});var ce=s(J,2);Q(ce,{title:"Budget Summary",children:(j,U)=>{var _=_e(),q=C(_);{var A=w=>{var g=lt(),d=r(g),Y=s(r(d),2),u=r(Y,!0);a(Y),a(d);var x=s(d,2),X=s(r(x),2),ve=r(X,!0);a(X),a(x);var Z=s(x,4),$=s(r(Z),2),k=r($,!0);a($),a(Z),a(g),H((b,I,B)=>{P(u,b),P(ve,I),Ge($,1,(n(t()),o(()=>t().budgetSummary.plannedRemaining>=0?"text-success-600":"text-danger-600"))),P(k,B)},[()=>(n(E),n(t()),o(()=>E(t().budgetSummary.salary))),()=>(n(E),n(t()),o(()=>E(t().budgetSummary.totalPlanned))),()=>(n(E),n(t()),o(()=>E(t().budgetSummary.plannedRemaining)))]),c(w,g)};M(q,w=>{n(t()),o(()=>t().budgetSummary)&&w(A)})}c(j,_)},$$slots:{default:!0}}),a(S);var R=s(S,2);Q(R,{title:"Planned Expenses",subtitle:"Your expected monthly expenses",children:(j,U)=>{var _=_e(),q=C(_);{var A=g=>{var d=ct();He(d,5,()=>(n(t()),o(()=>t().plannedExpenses)),Qe,(Y,u)=>{var x=ut(),X=r(x);{var ve=$=>{var k=it(),b=C(k),I=r(b);xe(I,{get options(){return e(oe)},required:!0,get value(){return e(i).category_id},set value(y){T(i,e(i).category_id=y)},$$legacy:!0});var B=s(I,2);K(B,{type:"number",step:"0.01",required:!0,get value(){return e(i).amount},set value(y){T(i,e(i).amount=y)},$$legacy:!0});var ee=s(B,2);K(ee,{placeholder:"Description",get value(){return e(i).description},set value(y){T(i,e(i).description=y)},$$legacy:!0}),a(b);var N=s(b,2),te=r(N);z(te,{size:"sm",get loading(){return e(f)},$$events:{click:Ee},children:(y,re)=>{Ve(y,{class:"w-4 h-4"})},$$slots:{default:!0}});var ae=s(te,2);z(ae,{size:"sm",variant:"secondary",$$events:{click:Be},children:(y,re)=>{se();var L=ye("Cancel");c(y,L)},$$slots:{default:!0}}),a(N),c($,k)},Z=$=>{var k=dt(),b=C(k),I=r(b),B=r(I),ee=s(B,2),N=r(ee),te=r(N,!0);a(N);var ae=s(N,2),y=r(ae,!0);a(ae),a(ee),a(I),a(b);var re=s(b,2),L=r(re),Me=r(L,!0);a(L);var ge=s(L,2),fe=r(ge);z(fe,{size:"sm",variant:"secondary",$$events:{click:()=>Ie(e(u))},children:(W,De)=>{Xe(W,{class:"w-4 h-4"})},$$slots:{default:!0}});var ze=s(fe,2);z(ze,{size:"sm",variant:"danger",$$events:{click:()=>ke(e(u).id)},children:(W,De)=>{at(W,{class:"w-4 h-4"})},$$slots:{default:!0}}),a(ge),a(re),H(W=>{Ke(B,`background-color: ${e(u),o(()=>e(u).category_color)??""}`),P(te,(e(u),o(()=>e(u).category_name))),P(y,(e(u),o(()=>e(u).description||"No description"))),P(Me,W)},[()=>(n(E),e(u),o(()=>E(e(u).amount)))]),c($,k)};M(X,$=>{e(i),e(u),o(()=>e(i)&&e(i).id===e(u).id)?$(ve):$(Z,!1)})}a(x),c(Y,x)}),a(d),c(g,d)},w=g=>{var d=vt();c(g,d)};M(q,g=>{n(t()),o(()=>t().plannedExpenses?.length>0)?g(A):g(w,!1)})}c(j,_)},$$slots:{default:!0}}),c(h,ue)};M(Ae,h=>{n(t()),o(()=>t().budget)&&h(Ne)})}c(l,F)};M(Te,l=>{n(t()),o(()=>t().error)?l(Oe):l(je,!1)})}a(le),H(l=>P(Ce,`Budget Planning - ${l??""} ${n(t()),o(()=>t().currentYear)??""}`),[()=>(n(be),n(t()),o(()=>be(t().currentMonth||1)))]),c(Pe,le),Ye()}export{Tt as component};
