import"../chunks/DsnmJJEf.js";import{i as He}from"../chunks/gzsJLoAv.js";import{c as Pe,f as C,a as v,k as Le,m as Z,l as Ce,w as m,r as n,n as Ve,o as f,v as r,A as E,B as e,z as o,x as a,y as ce,C as Ne,t as V,q as We,$ as dt,u as i}from"../chunks/EyY2Qe4w.js";import{s as x,e as lt,h as ct}from"../chunks/BpIlfRRV.js";import{i as P}from"../chunks/4eF5hKyW.js";import{I as vt,s as ut,e as Me,i as Ye,b as pt,a as gt}from"../chunks/wEJ3cds_.js";import{l as mt,s as ft,p as _e}from"../chunks/DCLTBedR.js";import{i as Ie}from"../chunks/ut9W1y5t.js";import{g as Fe,c as Je,f as S}from"../chunks/DXgxfkXT.js";import{C as Be}from"../chunks/BZuN3xt8.js";import{B as W}from"../chunks/DM_qtgBz.js";import{S as Ze,I as G,p as _t,a as xt,b as yt}from"../chunks/Dpa4i0wj.js";import{c as ht}from"../chunks/fy_2tMX8.js";import{B as $t}from"../chunks/VaSqBtMh.js";import{C as Re}from"../chunks/CJjhGTn_.js";import{T as bt}from"../chunks/7FXa3mcv.js";function Ue(K,y){const w=mt(y,["children","$$slots","$$events","$$legacy"]);/**
 * @license lucide-svelte v0.541.0 - ISC
 *
 * ISC License
 *
 * Copyright (c) for portions of Lucide are held by Cole Bemis 2013-2023 as part of Feather (MIT). All other copyright (c) for Lucide are held by Lucide Contributors 2025.
 *
 * Permission to use, copy, modify, and/or distribute this software for any
 * purpose with or without fee is hereby granted, provided that the above
 * copyright notice and this permission notice appear in all copies.
 *
 * THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
 * WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
 * MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
 * ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
 * WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
 * ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
 * OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
 *
 * ---
 *
 * The MIT License (MIT) (for portions derived from Feather)
 *
 * Copyright (c) 2013-2023 Cole Bemis
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 *
 */const D=[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8"}],["path",{d:"M12 17.5v-11"}]];vt(K,ft({name:"receipt"},()=>w,{get iconNode(){return D},children:(t,d)=>{var s=Pe(),Q=C(s);ut(Q,y,"default",{}),v(t,s)},$$slots:{default:!0}}))}var St=f('<form class="space-y-4"><div class="grid grid-cols-1 md:grid-cols-2 gap-4"><!> <!></div> <!> <!> <div class="flex justify-end"><!></div></form>');function Et(K,y){Le(y,!1);const w=Z();let D=_e(y,"categories",24,()=>[]),t=_e(y,"loading",8,!1),d=_e(y,"submitText",8,"Add Expense"),s=Z({categoryId:"",amount:"",description:"",expenseDate:new Date().toISOString().split("T")[0]});const Q=ht();function xe(){!e(s).categoryId||!e(s).amount||!e(s).expenseDate||(Q("submit",{categoryId:parseInt(e(s).categoryId),amount:parseFloat(e(s).amount),description:e(s).description,expenseDate:e(s).expenseDate}),m(s,{categoryId:"",amount:"",description:"",expenseDate:new Date().toISOString().split("T")[0]}))}Ce(()=>n(D()),()=>{m(w,D().map(u=>({value:u.id.toString(),label:u.name})))}),Ve(),He();var N=St(),X=r(N),ve=r(X);Ze(ve,{label:"Category",get options(){return e(w)},required:!0,placeholder:"Select a category",get value(){return e(s).categoryId},set value(u){E(s,e(s).categoryId=u)},$$legacy:!0});var ye=o(ve,2);G(ye,{label:"Amount",type:"number",step:"0.01",min:"0",placeholder:"0.00",required:!0,get value(){return e(s).amount},set value(u){E(s,e(s).amount=u)},$$legacy:!0}),a(X);var O=o(X,2);G(O,{label:"Date",type:"date",required:!0,get value(){return e(s).expenseDate},set value(u){E(s,e(s).expenseDate=u)},$$legacy:!0});var q=o(O,2);G(q,{label:"Description (Optional)",placeholder:"What was this expense for?",get value(){return e(s).description},set value(u){E(s,e(s).description=u)},$$legacy:!0});var ee=o(q,2),he=r(ee);W(he,{type:"submit",get loading(){return t()},children:(u,Oe)=>{ce();var ue=Ne();V(()=>x(ue,d())),v(u,ue)},$$slots:{default:!0}}),a(ee),a(N),lt("submit",N,_t(xe)),v(K,N),We()}var wt=f('<p class="text-danger-600"> </p>'),Dt=f('<div class="text-center py-12"><!> <h3 class="text-lg font-medium text-gray-900 mb-2">No Budget Found</h3> <p class="text-gray-500 mb-6">You need to set up a budget before you can track expenses.</p> <!></div>'),Tt=f('<div class="flex-1 grid grid-cols-1 md:grid-cols-4 gap-4"><!> <!> <!> <!></div> <div class="ml-4 flex space-x-2"><!> <!></div>',1),kt=f('<div class="flex-1 flex items-center space-x-4"><div class="w-3 h-3 rounded-full flex-shrink-0"></div> <div class="flex-1 min-w-0"><p class="font-medium text-gray-900"> </p> <p class="text-sm text-gray-500 truncate"> </p></div> <!></div> <div class="flex items-center space-x-4"><span class="font-semibold text-gray-900"> </span> <div class="flex space-x-2"><!> <!></div></div>',1),It=f('<div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:bg-gray-50"><!></div>'),Bt=f('<div><h4 class="text-sm font-medium text-gray-500 mb-3 flex items-center"><!> </h4> <div class="space-y-3 ml-6"><!> <div class="ml-4 pt-2 border-t border-gray-200"><div class="flex justify-between text-sm"><span class="text-gray-500">Daily total:</span> <span class="font-semibold text-gray-900"> </span></div></div></div></div>'),Pt=f('<div class="mt-6 pt-6 border-t border-gray-200"><div class="grid grid-cols-1 md:grid-cols-3 gap-4"><div class="text-center"><p class="text-sm text-gray-500">Total Spent</p> <p class="text-2xl font-bold text-gray-900"> </p></div> <div class="text-center"><p class="text-sm text-gray-500">Budget Remaining</p> <p> </p></div> <div class="text-center"><p class="text-sm text-gray-500">Total Expenses</p> <p class="text-2xl font-bold text-gray-900"> </p></div></div></div>'),Ct=f('<div class="space-y-6"></div> <!>',1),Nt=f('<div class="text-center py-12"><!> <h3 class="text-lg font-medium text-gray-900 mb-2">No Expenses Yet</h3> <p class="text-gray-500">Start tracking your expenses by adding your first expense above.</p></div>'),Ot=f('<div class="grid grid-cols-1 lg:grid-cols-2 gap-6"><!> <!></div> <!>',1),qt=f('<div class="space-y-6"><div><h1 class="text-2xl font-bold text-gray-900"> </h1> <p class="text-gray-500 mt-1">Track your daily expenses and monitor your spending</p></div> <!></div>');function Qt(K,y){Le(y,!1);const w=Z(),D=Z();let t=_e(y,"data",8),d=Z(null),s=Z(!1);async function Q(l){if(t().budget){m(s,!0);try{(await fetch("/api/actual-expenses",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({budgetId:t().budget.id,...l.detail})})).ok&&await Ie()}finally{m(s,!1)}}}async function xe(){if(e(d)){m(s,!0);try{(await fetch("/api/actual-expenses",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e(d))})).ok&&(m(d,null),await Ie())}finally{m(s,!1)}}}async function N(l){if(confirm("Are you sure you want to delete this expense?")){m(s,!0);try{(await fetch("/api/actual-expenses",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:l})})).ok&&await Ie()}finally{m(s,!1)}}}function X(l){m(d,{...l})}function ve(){m(d,null)}function ye(l){const _={};return l.forEach($=>{const p=$.expense_date;_[p]||(_[p]=[]),_[p].push($)}),Object.entries(_).sort(([$],[p])=>new Date(p).getTime()-new Date($).getTime()).map(([$,p])=>({date:$,expenses:p}))}Ce(()=>n(t()),()=>{m(w,t().categories?.map(l=>({value:l.id.toString(),label:l.name}))||[])}),Ce(()=>n(t()),()=>{m(D,t().actualExpenses?ye(t().actualExpenses):[])}),Ve(),He();var O=qt();ct(l=>{dt.title="Expenses - Budget Tracker"});var q=r(O),ee=r(q),he=r(ee);a(ee),ce(2),a(q);var u=o(q,2);{var Oe=l=>{Be(l,{title:"Error",children:(_,$)=>{var p=wt(),$e=r(p,!0);a(p),V(()=>x($e,(n(t()),i(()=>t().error)))),v(_,p)},$$slots:{default:!0}})},ue=l=>{var _=Pe(),$=C(_);{var p=A=>{var j=Dt(),z=r(j);Re(z,{class:"w-16 h-16 mx-auto text-gray-400 mb-4"});var pe=o(z,6);W(pe,{href:"/budget",children:(be,qe)=>{ce();var Se=Ne("Set Up Budget");v(be,Se)},$$slots:{default:!0}}),a(j),v(A,j)},$e=A=>{var j=Ot(),z=C(j),pe=r(z);Be(pe,{title:"Add New Expense",children:(T,Ge)=>{Et(T,{get categories(){return n(t()),i(()=>t().categories)},get loading(){return e(s)},$$events:{submit:Q}})},$$slots:{default:!0}});var be=o(pe,2);{var qe=T=>{$t(T,{get remaining(){return n(t()),i(()=>t().budgetSummary.remainingBudget)},get total(){return n(t()),i(()=>t().budgetSummary.salary)}})};P(be,T=>{n(t()),i(()=>t().budgetSummary)&&T(qe)})}a(z);var Se=o(z,2);Be(Se,{title:"Your Expenses",subtitle:"All recorded expenses for this month",children:(T,Ge)=>{var Ae=Pe(),Ke=C(Ae);{var Qe=M=>{var Y=Ct(),te=C(Y);Me(te,5,()=>e(D),Ye,(ae,h)=>{var F=Bt(),k=r(F),re=r(k);Re(re,{class:"w-4 h-4 mr-2"});var Ee=o(re);a(k);var J=o(k,2),R=r(J);Me(R,1,()=>(e(h),i(()=>e(h).expenses)),Ye,(I,c)=>{var De=It(),at=r(De);{var rt=U=>{var ie=Tt(),B=C(ie),ne=r(B);Ze(ne,{get options(){return e(w)},required:!0,get value(){return e(d).category_id},set value(g){E(d,e(d).category_id=g)},$$legacy:!0});var H=o(ne,2);G(H,{type:"number",step:"0.01",required:!0,get value(){return e(d).amount},set value(g){E(d,e(d).amount=g)},$$legacy:!0});var L=o(H,2);G(L,{type:"date",required:!0,get value(){return e(d).expense_date},set value(g){E(d,e(d).expense_date=g)},$$legacy:!0});var Te=o(L,2);G(Te,{placeholder:"Description",get value(){return e(d).description},set value(g){E(d,e(d).description=g)},$$legacy:!0}),a(B);var de=o(B,2),me=r(de);W(me,{size:"sm",get loading(){return e(s)},$$events:{click:xe},children:(g,fe)=>{xt(g,{class:"w-4 h-4"})},$$slots:{default:!0}});var ke=o(me,2);W(ke,{size:"sm",variant:"secondary",$$events:{click:ve},children:(g,fe)=>{ce();var le=Ne("Cancel");v(g,le)},$$slots:{default:!0}}),a(de),v(U,ie)},st=U=>{var ie=kt(),B=C(ie),ne=r(B),H=o(ne,2),L=r(H),Te=r(L,!0);a(L);var de=o(L,2),me=r(de,!0);a(de),a(H);var ke=o(H,2);{var g=b=>{Ue(b,{class:"w-4 h-4 text-gray-400"})};P(ke,b=>{e(c),i(()=>e(c).receipt_path)&&b(g)})}a(B);var fe=o(B,2),le=r(fe),ot=r(le,!0);a(le);var je=o(le,2),ze=r(je);W(ze,{size:"sm",variant:"secondary",$$events:{click:()=>X(e(c))},children:(b,nt)=>{yt(b,{class:"w-4 h-4"})},$$slots:{default:!0}});var it=o(ze,2);W(it,{size:"sm",variant:"danger",$$events:{click:()=>N(e(c).id)},children:(b,nt)=>{bt(b,{class:"w-4 h-4"})},$$slots:{default:!0}}),a(je),a(fe),V(b=>{pt(ne,`background-color: ${e(c),i(()=>e(c).category_color)??""}`),x(Te,(e(c),i(()=>e(c).category_name))),x(me,(e(c),i(()=>e(c).description||"No description"))),x(ot,b)},[()=>(n(S),e(c),i(()=>S(e(c).amount)))]),v(U,ie)};P(at,U=>{e(d),e(c),i(()=>e(d)&&e(d).id===e(c).id)?U(rt):U(st,!1)})}a(De),v(I,De)});var ge=o(R,2),se=r(ge),oe=o(r(se),2),we=r(oe,!0);a(oe),a(se),a(ge),a(J),a(F),V((I,c)=>{x(Ee,` ${I??""}`),x(we,c)},[()=>(n(Je),e(h),i(()=>Je(e(h).date))),()=>(n(S),e(h),i(()=>S(e(h).expenses.reduce((I,c)=>I+c.amount,0))))]),v(ae,F)}),a(te);var et=o(te,2);{var tt=ae=>{var h=Pt(),F=r(h),k=r(F),re=o(r(k),2),Ee=r(re,!0);a(re),a(k);var J=o(k,2),R=o(r(J),2),ge=r(R,!0);a(R),a(J);var se=o(J,2),oe=o(r(se),2),we=r(oe,!0);a(oe),a(se),a(F),a(h),V((I,c)=>{x(Ee,I),gt(R,1,`text-2xl font-bold ${n(t()),i(()=>t().budgetSummary.remainingBudget>=0?"text-success-600":"text-danger-600")??""}`),x(ge,c),x(we,(n(t()),i(()=>t().actualExpenses.length)))},[()=>(n(S),n(t()),i(()=>S(t().budgetSummary.totalActual))),()=>(n(S),n(t()),i(()=>S(t().budgetSummary.remainingBudget)))]),v(ae,h)};P(et,ae=>{n(t()),i(()=>t().budgetSummary)&&ae(tt)})}v(M,Y)},Xe=M=>{var Y=Nt(),te=r(Y);Ue(te,{class:"w-16 h-16 mx-auto text-gray-400 mb-4"}),ce(4),a(Y),v(M,Y)};P(Ke,M=>{n(t()),i(()=>t().actualExpenses?.length>0)?M(Qe):M(Xe,!1)})}v(T,Ae)},$$slots:{default:!0}}),v(A,j)};P($,A=>{n(t()),i(()=>!t().budget)?A(p):A($e,!1)},!0)}v(l,_)};P(u,l=>{n(t()),i(()=>t().error)?l(Oe):l(ue,!1)})}a(O),V(l=>x(he,`Expenses - ${l??""} ${n(t()),i(()=>t().currentYear)??""}`),[()=>(n(Fe),n(t()),i(()=>Fe(t().currentMonth||1)))]),v(K,O),We()}export{Qt as component};
